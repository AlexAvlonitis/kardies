.container
  .col.bg-white.effect2.mt-3
    %h1 All users - #{@user_count}
    %table.table
      %thead
        %tr
          %th{"width" => "150"} Profile Picture
          %th{"width" => "150"} Details
          %th{"width" => "150"} Delete Account
          %th{"width" => "150"} Admin
      %tbody
        - @users.each do |user|
          %tr
            %td
              = link_to admin_user_path(user) do
                = image_tag user.username,
                    data: { src: user.profile_picture },
                    class: "icon-size lazy"
            %td
              %p
                %b Username:
                = user.username
              %p
                %b Email:
                = user.email
              %p
                %b Confirmed?
                = user.confirmed_at
              %p
                %b Last login
                = user.updated_at
            %td
              = link_to "Delete Account", admin_destroy_path(user),
                  data: { confirm: "Προσοχή, ο λογαριασμός Θα διαγραφεί" },
                  method: :delete,
                  class: 'btn btn-danger btn-sm'
            %td
              - if user.admin?
                = link_to "Undo admin", admin_undo_admin_path(user),
                    data: { confirm: "Προσοχή, ο λογαριασμός Θα διαγραφεί" },
                    method: :post,
                    class: 'btn btn-primary btn-sm'
              - else
                = link_to "Make admin", admin_create_admin_path(user),
                    method: :post,
                    class: 'btn btn-danger btn-sm'
    = paginate @users
